services:
  tushare-mcp:
    build: .
    image: tushare-mcp:latest
    restart: unless-stopped
    env_file:
      - .env
    volumes:
      - ./data:/app/data
    command: ["tushare-mcp-server", "--specs", "data/tushare_api_specs.json"]
    stdin_open: true
    tty: false

  tushare-gateway:
    build: .
    image: tushare-mcp:latest
    restart: unless-stopped
    env_file:
      - .env
    volumes:
      - ./data:/app/data
    ports:
      - "8787:8787"
    command: ["tushare-mcp-gateway", "--specs", "data/tushare_api_specs.json", "--host", "0.0.0.0", "--port", "8787"]

  tushare-scraper:
    build:
      context: .
      dockerfile: Dockerfile.scraper
    image: tushare-mcp-scraper:latest
    volumes:
      - ./data:/app/data
    command: ["tushare-mcp-scrape", "--output", "data/tushare_api_specs.json"]
